# GoTo-HTTP 项目开发文档

## 项目结构

### 目录结构概览

```
goto-http/
├── cmd/                    # 命令行入口
│   └── goto-http/         # 主程序
│       └── main.go        # 程序入口点
├── internal/              # 内部包
│   ├── attack/           # 攻击实现
│   │   ├── attack.go     # 攻击核心实现
│   │   ├── interface.go  # 攻击接口定义
│   │   ├── methods.go    # 攻击方法实现
│   │   ├── options.go    # 攻击选项配置
│   │   └── types.go      # 类型定义
│   ├── bypass/           # 绕过实现
│   ├── cli/              # 命令行处理
│   ├── config/           # 配置处理
│   ├── logger/           # 日志处理
│   ├── monitor/          # 监控实现
│   ├── proxy/            # 代理管理
│   ├── system/           # 系统管理
│   ├── terminal/         # 终端界面
│   ├── useragent/        # UA管理
│   └── web/              # Web界面
├── pkg/                   # 公共包
│   ├── protocol/         # 协议实现
│   │   ├── http/        # HTTP协议
│   │   └── websocket/   # WebSocket协议
│   └── random/           # 随机生成器
├── configs/              # 配置文件
│   ├── attack.example.json  # 攻击配置示例
│   ├── api_proxy.example.json  # 代理API配置示例
│   ├── config.example.yaml  # YAML配置示例
│   └── config.example.json  # JSON配置示例
├── web/                  # Web前端
│   ├── index.html       # 主页面
│   └── assets/          # 静态资源
└── scripts/              # 辅助脚本
    ├── build.sh         # 构建脚本
    ├── test.sh         # 测试脚本
    └── install.sh      # 安装脚本
```

### 详细文件列表

#### 1. 命令行入口 (`cmd/`)
- `cmd/goto-http/main.go`
  - 功能：程序主入口
  - 职责：
    - 解析命令行参数
    - 初始化配置
      - `-config`: 指定攻击配置文件路径
      - `-proxy-config`: 指定代理API配置文件路径
    - 启动攻击实例
    - 管理程序生命周期

#### 2. 攻击模块 (`internal/attack/`)
- `attack.go`
  - 功能：攻击核心实现
  - 包含：
    - AttackImpl 结构体
    - 请求发送逻辑
    - 速率控制
    - 统计收集
- `interface.go`
  - 功能：接口定义
  - 包含：
    - Attacker 接口
    - AttackMethod 接口
    - AttackStats 接口
- `methods.go`
  - 功能：具体攻击方法实现
  - 包含：
    - GET/POST洪水
    - Slowloris
    - HTTP2攻击
    - WebSocket攻击
- `options.go`
  - 功能：攻击配置选项
  - 包含：
    - Options结构体
    - 选项验证逻辑
    - 默认值设置
- `types.go`
  - 功能：类型定义
  - 包含：
    - 攻击方法枚举
    - 攻击模式枚举
    - 统计结构体

#### 3. 绕过模块 (`internal/bypass/`)
- `bypass.go`
  - 功能：WAF绕过实现
  - 包含：
    - 规则生成
    - 特征识别
    - 绕过验证
- `rules.go`
  - 功能：绕过规则定义
  - 包含：
    - 规则结构体
    - 规则匹配逻辑
- `manager.go`
  - 功能：绕过管理器
  - 包含：
    - 规则管理
    - 规则应用

#### 4. 命令行处理 (`internal/cli/`)
- `flags.go`
  - 功能：命令行参数定义
  - 包含：
    - 参数结构体
    - 参数解析
    - 默认值设置
- `handler.go`
  - 功能：命令行处理
  - 包含：
    - 参数验证
    - 命令执行
    - 帮助信息

#### 5. 配置处理 (`internal/config/`)
- `config.go`
  - 功能：配置管理
  - 包含：
    - 配置结构体
    - 配置加载
      - 支持加载独立的攻击配置
      - 支持加载独立的代理API配置
    - 配置验证
- `default.go`
  - 功能：默认配置
  - 包含：
    - 默认值定义
    - 配置初始化

#### 6. 日志处理 (`internal/logger/`)
- `logger.go`
  - 功能：日志管理
  - 包含：
    - 日志初始化
    - 级别控制
    - 格式化输出
- `formatter.go`
  - 功能：日志格式化
  - 包含：
    - 格式定义
    - 颜色支持

#### 7. 监控模块 (`internal/monitor/`)
- `monitor.go`
  - 功能：监控管理
  - 包含：
    - 指标收集
    - 数据存储
    - 告警触发
- `metrics.go`
  - 功能：监控指标
  - 包含：
    - 指标定义
    - 数据计算

#### 8. 代理模块 (`internal/proxy/`)
- `proxy.go`
  - 功能：代理管理
  - 包含：
    - 代理加载
    - 代理验证
    - 代理轮换
- `checker.go`
  - 功能：代理检查
  - 包含：
    - 可用性检查
    - 延迟测试
- `stats.go`
  - 功能：代理统计
  - 包含：
    - 使用统计
    - 失败统计

#### 9. UA管理 (`internal/useragent/`)
- `useragent.go`
  - 功能：User-Agent管理
  - 包含：
    - UA生成
    - UA轮换
- `data.go`
  - 功能：UA数据
  - 包含：
    - UA列表
    - 设备信息

#### 10. Web界面 (`internal/web/`)
- `server.go`
  - 功能：Web服务器
  - 包含：
    - HTTP处理
    - WebSocket支持
    - 静态文件服务
- `handler.go`
  - 功能：请求处理
  - 包含：
    - API路由
    - 认证处理
- `websocket.go`
  - 功能：WebSocket处理
  - 包含：
    - 实时数据推送
    - 命令处理

#### 11. 系统管理 (`internal/system/`)
- `resource.go`
  - 功能：系统资源管理
  - 包含：
    - CPU使用率监控
    - 内存使用监控
    - 文件描述符监控
    - 网络连接监控
- `limit.go`
  - 功能：系统限制管理
  - 包含：
    - CPU限制设置
    - 内存限制设置
    - 文件描述符限制
    - 进程优先级设置
- `signal.go`
  - 功能：信号处理
  - 包含：
    - 优雅关闭
    - 重载配置
    - 状态导出
- `metrics.go`
  - 功能：系统指标收集
  - 包含：
    - 性能指标采集
    - 资源使用统计
    - 系统负载分析

#### 12. 终端界面 (`internal/terminal/`)
- `terminal.go`
  - 功能：终端UI管理
  - 包含：
    - 界面初始化
    - 布局管理
    - 事件处理
    - 键盘绑定
- `view.go`
  - 功能：视图组件
  - 包含：
    - 状态视图
    - 日志视图
    - 统计视图
    - 帮助视图
- `controller.go`
  - 功能：控制器
  - 包含：
    - 命令处理
    - 状态更新
    - 数据刷新
- `widgets.go`
  - 功能：自定义组件
  - 包含：
    - 进度条组件
    - 图表组件
    - 表格组件
    - 状态栏组件

#### 13. 协议实现 (`pkg/protocol/`)
- `http/client.go`
  - 功能：HTTP客户端
  - 包含：
    - 请求发送
    - 连接管理
    - 重试逻辑
- `websocket/client.go`
  - 功能：WebSocket客户端
  - 包含：
    - 连接管理
    - 消息处理
    - 心跳维护

#### 14. 随机生成器 (`pkg/random/`)
- `generator.go`
  - 功能：随机数据生成
  - 包含：
    - 字符串生成
    - 数值生成
    - 数据生成

#### 15. Web前端 (`web/`)
- `index.html`
  - 功能：主页面
- `assets/`
  - 功能：静态资源
  - 包含：
    - CSS样式
    - JavaScript脚本
    - 图片资源

#### 16. 辅助脚本 (`scripts/`)
- `build.sh`
  - 功能：构建脚本
- `test.sh`
  - 功能：测试脚本
- `install.sh`
  - 功能：安装脚本

## 功能实现状态

### 已实现功能

#### 1. 攻击模块 (`internal/attack/`)
- [x] 基础攻击框架
- [x] HTTP基础攻击方法
  - GET/POST/HEAD洪水
  - Slowloris
  - 分块传输攻击
- [x] HTTP/2攻击方法
  - 优先级攻击
  - RST帧攻击
  - 设置帧洪水
- [x] WebSocket攻击方法
  - 帧洪水
  - PING洪水
  - 压缩放大
- [x] 攻击统计
- [x] 速率限制
- [x] 并发控制

#### 2. 代理模块 (`internal/proxy/`)
- [x] 代理管理器
- [x] 代理轮换
- [x] 代理验证
- [x] 代理统计

#### 3. 日志模块 (`internal/logger/`)
- [x] 基础日志功能
- [x] 日志级别控制
- [x] 日志格式化

#### 4. 配置模块 (`internal/config/`)
- [x] 配置文件解析
- [x] 命令行参数处理
- [x] 配置验证

#### 5. 终端界面模块 (`internal/terminal/`)
- [x] 基础界面框架
  - 界面布局管理
  - 事件处理系统
  - 键盘绑定支持
- [x] 核心组件
  - 状态视图
  - 日志视图
  - 统计视图
  - 帮助视图
- [x] 自定义组件
  - 进度条组件
  - 图表组件
  - 表格组件
  - 状态栏组件
- [x] 控制功能
  - 命令处理
  - 状态更新
  - 数据刷新
  - 实时监控

### 进行中的功能

#### 1. 攻击模块增强
- [ ] 智能攻击模式
  - [ ] 自适应速率调整
  - [ ] 动态并发控制
  - [ ] 自动攻击方法选择
- [ ] 更多协议支持
  - [ ] QUIC/HTTP3
  - [ ] gRPC
  - [ ] MQTT
- [ ] 攻击效果评估
  - [ ] 目标可用性监控
  - [ ] 攻击效果分析
  - [ ] 自动调整策略

#### 2. 绕过模块 (`internal/bypass/`)
- [ ] WAF特征识别
- [ ] 自动规则生成
- [ ] 绕过效果验证
- [ ] IP地址欺骗
- [ ] 协议混淆

#### 3. 监控模块 (`internal/monitor/`)
- [ ] 系统资源监控
- [ ] 攻击效果监控
- [ ] 代理健康监控
- [ ] 告警系统
- [ ] 监控数据持久化

#### 4. Web界面 (`internal/web/`)
- [ ] 实时攻击控制
- [ ] 统计数据展示
- [ ] 配置管理界面
- [ ] 代理管理界面
- [ ] 用户认证

#### 5. 终端界面增强
- [ ] 高级显示功能
  - [ ] 实时攻击视图
  - [ ] 资源使用监控
  - [ ] 网络流量分析
  - [ ] 代理状态展示
- [ ] 交互优化
  - [ ] 快捷键定制
  - [ ] 命令自动完成
  - [ ] 历史记录管理
  - [ ] 配置文件编辑
- [ ] 主题支持
  - [ ] 自定义颜色方案
  - [ ] 布局模板
  - [ ] 组件样式定制
- [ ] 多语言支持
  - [ ] 界面翻译
  - [ ] 帮助文档本地化
  - [ ] 错误消息翻译

### 未来规划

#### 1. 新功能
- [ ] 分布式攻击支持
  - [ ] 节点管理
  - [ ] 任务分发
  - [ ] 结果聚合
- [ ] 机器学习集成
  - [ ] 攻击模式识别
  - [ ] 自动参数优化
  - [ ] 异常检测
- [ ] API网关
  - [ ] RESTful API
  - [ ] WebSocket API
  - [ ] 权限控制
- [ ] 插件系统
  - [ ] 插件管理
  - [ ] 自定义攻击方法
  - [ ] 自定义监控指标

#### 2. 性能优化
- [ ] 内存使用优化
- [ ] CPU使用优化
- [ ] 网络IO优化
- [ ] 并发控制优化

#### 3. 可用性提升
- [ ] 更好的错误处理
- [ ] 更详细的文档
- [ ] 更多的单元测试
- [ ] 更多的集成测试
- [ ] CI/CD支持

## 代码质量提升计划

### 1. 重构需求
- [ ] 接口优化
- [ ] 错误处理统一
- [ ] 配置结构优化
- [ ] 代码组织优化

### 2. 测试覆盖
- [ ] 单元测试覆盖率提升
- [ ] 集成测试完善
- [ ] 性能测试套件
- [ ] 压力测试套件

### 3. 文档完善
- [ ] API文档
- [ ] 开发文档
- [ ] 部署文档
- [ ] 使用示例

### 4. 工具支持
- [ ] 开发环境配置
- [ ] 调试工具
- [ ] 性能分析工具
- [ ] 代码质量检查

## 版本规划

### v1.0.0
- 基础攻击功能
- 代理支持
- 命令行界面
- 基础监控

### v1.1.0
- Web界面
- 更多攻击方法
- 监控增强
- 配置优化

### v1.2.0
- 分布式支持
- API网关
- 插件系统
- 机器学习集成

### v2.0.0
- 完整的企业级功能
- 高级监控和分析
- 完善的文档和测试
- 生产级别的稳定性

## 贡献指南

### 1. 开发流程
1. Fork项目
2. 创建特性分支
3. 提交变更
4. 发起Pull Request

### 2. 代码规范
- 遵循Go代码规范
- 使用gofmt格式化代码
- 添加必要的注释
- 编写测试用例

### 3. 提交规范
- 使用清晰的提交信息
- 一个提交只做一件事
- 保持提交历史整洁

### 4. 测试要求
- 新功能必须有测试
- 修复bug必须有测试
- 保持测试覆盖率

## 维护计划

### 1. 日常维护
- 定期代码审查
- 定期依赖更新
- 定期安全检查
- 性能监控

### 2. 版本维护
- 遵循语义化版本
- 维护更新日志
- 提供向后兼容
- 及时修复bug

### 3. 社区维护
- 及时响应issue
- 审查Pull Request
- 更新文档
- 维护示例代码 